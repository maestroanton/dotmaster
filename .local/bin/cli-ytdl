#!/bin/bash

### FUNCTIONS ###

error(){ # Logs to stderr and exits 
	printf"%s\n" "$1" >&2
	exit 1
}

dmenu_display() { # Message to display in dmenu
	INPUT=$(printf "${1}" | dmenu)
}

### VARIABLES ###

MP3_FOLDER="${HOME}/music/" 
WAV_FOLDER="${HOME}/Downloads/random-videos/"

### MAIN CODE ### 

dmenu_display "Paste the video link."
VIDEO_LINK=$INPUT
dmenu_display "Video\\nAudio"

case $INPUT in 
	Video) echo 'Downloading...'; yt-dlp -P $WAV_FOLDER -f mp4 $VIDEO_LINK &> /dev/null || error "Unavailable link or bad directory (default download directories are in the script)"
	;;
	Audio) echo 'Downloading...'; yt-dlp -P $MP3_FOLDER -x $VIDEO_LINK --audio-format wav &> /dev/null || error "Unavailable link or bad directory (default download directories are in the script)"	
	;; 
esac

[ $? != 1 ] && echo "Finished." "Succesfull download."
