#!/bin/bash

### FUNCTIONS ###

error(){ # Logs to stderr and exits 
	printf"%s\n" "$1" >&2
	exit 1
}

dmenu_display() { # Message to display in dmenu
	INPUT=$(printf "${1}" | dmenu)
}

### MAIN CODE ### 

dmenu_display "Paste the video link."
VIDEO_LINK=$INPUT
dmenu_display "Video\\nAudio"

case $INPUT in 
	Video) notify-send 'Downloading...'; yt-dlp -f mp4 $VIDEO_LINK &> /dev/null || (error "Oops!" "Bad link or unavailable video." && exit 1)
	;;
	Audio) echo 'Downloading...'; yt-dlp -x $VIDEO_LINK --audio-format wav &> /dev/null || (error "Oops!" "Bad link or unavailable video." && exit 1)	
	;; 
esac

[ $? != 1 ] && echo "Finished." "Succesfull download."
