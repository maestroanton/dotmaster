#!/bin/bash

### FUNCTIONS ###

error() { # Displays error and exits 
	notify-send "$1" "$2" 
	exit 1
}
dmenu_display() { # Message to display in dmenu
	INPUT=$(printf "${1}" | dmenu)
}
### VARIABLES ###

MP3_FOLDER="${HOME}/music/" 
WAV_FOLDER="${HOME}/Downloads/random-videos/"

### MAIN CODE ### 

case $BLOCK_BUTTON in 
	1)	dmenu_display "Paste the video link."
		VIDEO_LINK=$INPUT
		dmenu_display "Video\\nAudio"
			case $INPUT in 
				Video) notify-send 'Downloading...'; yt-dlp -P $WAV_FOLDER -f mp4 $VIDEO_LINK &> /dev/null || error "Oops!" "Unavailable link or bad directory (default download directories are in the script)."
				;;
				Audio) notify-send 'Downloading...'; yt-dlp -P $MP3_FOLDER -x $VIDEO_LINK --audio-format wav &> /dev/null || error "Oops!" "Unavailable link or bad directory (default download directories are in the script)."
				;; 
			esac
		[ $? != 1 ] && notify-send "Finished." "Succesfull download."
	;;
esac

# Button that appears in the bar

echo "ï…ª"


